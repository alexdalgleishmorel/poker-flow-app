<div mat-dialog-content>
    <h1 mat-dialog-title class="title">Choose your buy-in amount</h1>
    <div class="spacer"></div>
    <div class="input-container">
        <form [formGroup]="form">
            <mat-form-field>
                <mat-label>Buy-In</mat-label>
                <div class="money-prefix" matPrefix>&nbsp; $</div>
                <input
                    matInput
                    [formControl]="buyInFormControl"
                    type="number"
                    placeholder="Buy In"
                    (blur)="onBlur()"
                    (keypress)="decimalFilter($event)"
                    (keydown)="resetAssignments()"
                    onkeydown="return event.keyCode !== 69 && event.keyCode !== 187 && event.keyCode !== 189"
                    min="0"
                >
            </mat-form-field>
            <mat-error *ngIf="buyInFormControl.errors?.['min'] else maxBuyInError">
                Minimum buy-in: <b>${{data.poolSettings.min_buy_in.toFixed(2)}}</b>
            </mat-error>
            <ng-template #maxBuyInError>
                <mat-error *ngIf="buyInFormControl.errors?.['max'] else insufficientInventoryError">
                    Maximum buy-in: <b>${{data.poolSettings.max_buy_in.toFixed(2)}}</b>
                </mat-error>
            </ng-template>
            <ng-template #insufficientInventoryError>
                <mat-error *ngIf="buyInFormControl.errors?.['insufficientInventory']">
                    Incompatible with inventory.
                </mat-error>
            </ng-template>
        </form>
    </div>
    <div class="spacer"></div>
    <div class="chip-view-title">Chips</div>
    <div class="spacer"></div>
    <app-chip-view
        [denominations]="denominations"
        [assignments]="assignments"
    >
    </app-chip-view>
    <div class="spacer"></div>
    <div class="buttons-container">
        <button
        mat-raised-button
        (click)="cancelBuyIn()"
        >
            CANCEL
        </button>
        <div class="spacer"></div>
        <button
        mat-raised-button
        color="accent"
        [disabled]="form.invalid || !device.inventory"
        (click)="confirmBuyIn()"
        >
            BUY-IN
        </button>
    </div>
</div>
